var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},n={},a=e.parcelRequire7a9c;null==a&&((a=function(e){if(e in t)return t[e].exports;if(e in n){var a=n[e];delete n[e];var o={id:e,exports:{}};return t[e]=o,a.call(o.exports,o,o.exports),o.exports}var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){n[e]=t},e.parcelRequire7a9c=a),a.register("2Ep0d",(function(e,t){const n="api_key=b5e824a3d922f68ba211fcf6dbdcb6f5",a="https://api.themoviedb.org/3/discover/movie?sort_by-popularity.desc&"+n;let o,i,s,d;s=null===JSON.parse(localStorage.getItem("movie-queue"))?[]:JSON.parse(localStorage.getItem("movie-queue")),localStorage.setItem("movie-queue",JSON.stringify(s)),d=null===JSON.parse(localStorage.getItem("movie-watched"))?[]:JSON.parse(localStorage.getItem("movie-watched")),localStorage.setItem("movie-watched",JSON.stringify(d));const l=document.getElementById("myModal"),r=document.getElementById("modal-poster"),c=document.getElementById("modal-title"),g=document.getElementById("modal-vote"),m=document.getElementById("modal-popularity"),u=document.getElementById("modal-original-title"),p=document.getElementById("modal-genre"),v=document.getElementById("modal-overview"),h=document.getElementById("addToWatchedBtn"),f=document.getElementById("addToQueuBtn"),y=document.getElementsByClassName("close")[0];let E;function b(){l.style.display="none"}fetch("https://api.themoviedb.org/3/genre/movie/list?api_key=b5e824a3d922f68ba211fcf6dbdcb6f5").then((e=>e.json())).then((e=>{E=e.genres,B(a),_(e)})).catch((e=>{console.error("Error fetching genres:",e)})),y.addEventListener("click",b),window.addEventListener("click",(function(e){e.target===l&&b()}));const L=document.getElementById("main"),I=document.getElementById("search-form"),x=document.getElementById("search-input"),S=(document.getElementById("gallery"),document.querySelector(".loader-container"));let w;function B(e){w=e,L.classList.toggle("is-hidden"),S.classList.toggle("is-hidden"),fetch(e).then((e=>e.json())).then((e=>{console.log(e.results),0!==e.results.length?(_(e.results),currentPage=e.page,nextPage=currentPage+1,prevPage=currentPage-1,totalPages=e.total_pages,L.classList.toggle("is-hidden"),S.classList.toggle("is-hidden"),current.innerText=currentPage,currentPage<=1?(prev.classList.add("disabled"),next.classList.remove("disabled")):currentPage>=totalPages?(prev.classList.remove("disabled"),next.classList.add("disabled")):(prev.classList.remove("disabled"),next.classList.remove("disabled"))):(L.classList.toggle("is-hidden"),S.classList.toggle("is-hidden"),L.innerHTML='<h1 class="no-results">No Results Found</h1>')}))}function _(e){L.innerHTML="",e.forEach((e=>{const{title:t,poster_path:n,release_date:a,genre_ids:o}=e,i=document.createElement("div");i.classList.add("movie");const s=o&&Array.isArray(E)?o.map((e=>{const t=E.find((t=>t.id===e));return t?t.name:""})).join(", "):"";i.innerHTML=`\n            <img src="${n?"https://image.tmdb.org/t/p/w500"+n:"http:/>/via.placeholder.com/1080x1500"}"\n                alt="${t}"/>\n            \n            <div class="movie-info">\n                <h3>${t.toUpperCase()}</h3>\n                <div class="movie-details">\n                <span id="genre">${s}</span> |\n                <span id="release_date" class="${a}">${a.slice(0,4)}</span>\n                  </div>\n                  </div>        \n                  `,i.addEventListener("click",(function(){!function(e){r.src=`https://image.tmdb.org/t/p/w500/${e.poster_path}`,c.textContent=e.title.toUpperCase(),g.textContent=e.vote_average.toFixed(1)+"   /   "+e.vote_count,m.textContent=e.popularity.toFixed(1),u.textContent=e.original_title.toUpperCase();const t=e.genre_ids.map((e=>{const t=E.find((t=>t.id===e));return t?t.name:""})).join(", ");p.textContent=t,v.textContent=e.overview,l.style.display="block"}(e)})),L.appendChild(i)}))}function k(e){let t=w.split("?"),n=t[1].split("&"),a=n[n.length-1].split("=");if("page"!=a[0]){B(w+"&page="+e)}else{a[1]=e.toString();let o=a.join("=");n[n.length-1]=o;let i=n.join("&");B(t[0]+"?"+i)}}B(a),I.addEventListener("submit",(e=>{e.preventDefault();const t=x.value;B(t?"https://api.themoviedb.org/3/search/movie?api_key=b5e824a3d922f68ba211fcf6dbdcb6f5&query="+t:a)})),prev.addEventListener("click",(()=>{prevPage>0&&k(prevPage)})),next.addEventListener("click",(()=>{nextPage<=totalPages&&k(nextPage)})),L.addEventListener("click",(e=>{let t=e.target.parentElement;o=t.lastElementChild.firstElementChild.innerText,console.log(o)})),h.addEventListener("click",(()=>{d.includes(o)?alert(`${o} has been watched already`):d.push(o),localStorage.setItem("movie-watched",JSON.stringify(d))})),f.addEventListener("click",(()=>{s.includes(o)?alert(`${o} has been added to the queue already`):s.push(o),localStorage.setItem("movie-queue",JSON.stringify(s))})),h.addEventListener("click",(()=>{d.includes(i)?alert(`${o} has been watched already`):d.push(i),localStorage.setItem("movie-watched",JSON.stringify(d))})),f.addEventListener("click",(()=>{s.includes(i)?alert(`${o} has been added to the queue already`):s.push(i),localStorage.setItem("movie-queue",JSON.stringify(s))})),document.body.addEventListener("keydown",(e=>{"Escape"===e.code&&b()}))})),a("2Ep0d");
//# sourceMappingURL=index.0a3358e8.js.map
