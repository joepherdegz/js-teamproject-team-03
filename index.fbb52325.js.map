{"mappings":"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","sources":["src/js/script.js"],"sourcesContent":["document.addEventListener('DOMContentLoaded', function () {\n  const BASE_URL = 'https://api.themoviedb.org/3';\n  const API_KEY = 'api_key=b5e824a3d922f68ba211fcf6dbdcb6f5';\n  const API_URL = BASE_URL + '/discover/movie?sort_by-popularity.desc&' + API_KEY;\n  const IMG_URL = 'https://image.tmdb.org/t/p/w500';\n  const searchURL = BASE_URL + '/search/movie?' + API_KEY;\n  const getGenres = BASE_URL + '/genre/movie/list' + API_KEY;\n\n\n  const options = {\n    params: {\n      key: API_KEY,\n      query: '',\n      include_adult: false,\n      language: 'en-US',\n      primary_release_year: '',\n      page: 1,\n      region: '',\n      year: '',\n    },\n  };\n\n  //localStorage\n  let currentMovieTitle, currentMovieID, queue, watched;\n  JSON.parse(localStorage.getItem(\"movie-queue\")) === null ? queue = [] : queue = JSON.parse(localStorage.getItem(\"movie-queue\"));\n  localStorage.setItem(\"movie-queue\", JSON.stringify(queue));\n\n  JSON.parse(localStorage.getItem(\"movie-watched\")) === null ? watched = [] : watched = JSON.parse(localStorage.getItem(\"movie-watched\"));\n  localStorage.setItem(\"movie-watched\", JSON.stringify(watched));\n\n\n  // MODAL SECTION\n  const modal = document.getElementById('myModal');\n  const modalPoster = document.getElementById('modal-poster');\n  const modalTitle = document.getElementById('modal-title');\n  const modalVote = document.getElementById('modal-vote');\n  const modalPopularity = document.getElementById('modal-popularity');\n  const modalOrigTitle = document.getElementById('modal-original-title');\n  const modalGenre = document.getElementById('modal-genre');\n  const modalOverview = document.getElementById('modal-overview');\n  const addToWatchedBtn = document.getElementById('addToWatchedBtn');\n  const addToQueuBtn = document.getElementById('addToQueuBtn');\n  const closeBtn = document.getElementsByClassName('close')[0];\n\n  // function to open the modal with movie details\n  function openModal(movie) {\n\n    modalPoster.src = `https://image.tmdb.org/t/p/w500/${movie.poster_path}`;\n    modalTitle.textContent = movie.title.toUpperCase();\n    modalVote.textContent =\n      movie.vote_average.toFixed(1) + '   /   ' + movie.vote_count;\n    modalPopularity.textContent = movie.popularity.toFixed(1);\n    modalOrigTitle.textContent = movie.original_title.toUpperCase();\n    modalGenre.textContent = movie.genre;\n    modalOverview.textContent = movie.overview;\n    modal.style.display = 'block';\n\n    modalPoster.src = `https://image.tmdb.org/t/p/w500/${movie.poster_path}`;\n    modalTitle.textContent = movie.title;\n    modalVote.textContent = movie.vote_average + '/' + movie.vote_count;\n    modalPopularity.textContent = movie.popularity;\n    modalOrigTitle.textContent = movie.original_title;\n    modalGenre.textContent = movie.genre_ids;\n    modalOverview.textContent = movie.overview;\n    modal.style.display = \"block\";\n    currentMovieID = movie.id;\n    currentMovieTitle = movie.original_title;\n\n  }\n\n  // function to close the modal\n  function closeModal() {\n    modal.style.display = 'none';\n  }\n\n  // event listener for the close button\n  closeBtn.addEventListener('click', closeModal);\n\n  // event listener for clicks outside the modal\n  window.addEventListener('click', function (event) {\n    if (event.target === modal) {\n      closeModal();\n    }\n  });\n\n  const main = document.getElementById('main');\n  const form = document.getElementById('search-form');\n  const search = document.getElementById('search-input');\n  const galleryEl = document.getElementById('gallery');\n  const loader = document.querySelector('.loader-container');\n\n  // PAGINATION\n\n  getMovies(API_URL);\n\n  // DISPLAY MOVIE CARDS\n  function getMovies(url) {\n    lastUrl = url;\n  \n    main.classList.toggle('is-hidden');\n    loader.classList.toggle('is-hidden');\n\n    fetch(url)\n      .then(res => res.json())\n      .then(data => {\n        console.log(data.results);\n        if (data.results.length !== 0) {\n          showMovies(data.results);\n          currentPage = data.page;\n          nextPage = currentPage + 1;\n          prevPage = currentPage - 1;\n          totalPages = data.total_pages;\n          main.classList.toggle('is-hidden');\n          loader.classList.toggle('is-hidden');\n\n          current.innerText = currentPage;\n          if (currentPage <= 1) {\n            prev.classList.add('disabled');\n            next.classList.remove('disabled');\n          } else if (currentPage >= totalPages) {\n            prev.classList.remove('disabled');\n            next.classList.add('disabled');\n          } else {\n            prev.classList.remove('disabled');\n            next.classList.remove('disabled');\n          }\n        } else {\n          main.classList.toggle('is-hidden');\n          loader.classList.toggle('is-hidden');\n          main.innerHTML = `<h1 class=\"no-results\">No Results Found</h1>`;\n        }\n      });\n  }\n\n  function showMovies(data) {\n    main.innerHTML = '';\n\n    data.forEach(movie => {\n      const { title, poster_path, release_date, genre_ids } = movie;\n      const movieEl = document.createElement('div');\n      movieEl.classList.add('movie');\n      movieEl.innerHTML = `\n            <img src=\"${poster_path\n          ? IMG_URL + poster_path\n          : 'http:/>/via.placeholder.com/1080x1500'\n        }\"\n                alt=\"${title}\"/>\n            \n            <div class=\"movie-info\">\n                <h3>${title.toUpperCase()}</h3>\n                <div class=\"movie-details\">\n                    <span id=\"genre\" class=\"${genre_ids}\">${genre_ids}</span> |\n                    <span id=\"release_date\" class=\"${release_date}\">${release_date.slice(\n          0,\n          4\n        )}</span>\n                </div>\n            </div>        \n        `;\n      movieEl.addEventListener('click', function () {\n        openModal(movie);\n      });\n      main.appendChild(movieEl);\n    });\n  }\n\n  form.addEventListener('submit', e => {\n    e.preventDefault();\n\n    const searchTerm = search.value;\n\n    if (searchTerm) {\n      getMovies(searchURL + '&query=' + searchTerm);\n    } else {\n      getMovies(API_URL);\n    }\n  });\n\n  // function for previous page\n  prev.addEventListener('click', () => {\n    if (prevPage > 0) {\n      pageCall(prevPage);\n    }\n  });\n\n  // function for the next page\n  next.addEventListener('click', () => {\n    if (nextPage <= totalPages) {\n      pageCall(nextPage);\n    }\n  });\n\n  function pageCall(page) {\n    let urlSplit = lastUrl.split('?');\n    let queryParams = urlSplit[1].split('&');\n    let key = queryParams[queryParams.length - 1].split('=');\n    if (key[0] != 'page') {\n      let url = lastUrl + '&page=' + page;\n      getMovies(url);\n    } else {\n      key[1] = page.toString();\n      let a = key.join('=');\n      queryParams[queryParams.length - 1] = a;\n      let b = queryParams.join('&');\n      let url = urlSplit[0] + '?' + b;\n      getMovies(url);\n    }\n  }\n\n\n  //Clicking a movie\n  main.addEventListener('click', e => {\n    let currentMovie = e.target.parentElement;\n    currentMovieTitle = currentMovie.lastElementChild.firstElementChild.innerText;\n    console.log(currentMovieTitle);\n  });\n\n  //Add to Watched (localStorage)\n  addToWatchedBtn.addEventListener('click', () => {\n    watched.includes(currentMovieTitle)\n      ? alert(`${currentMovieTitle} has been watched already`)\n      : watched.push(currentMovieTitle);\n    localStorage.setItem('movie-watched', JSON.stringify(watched));\n  });\n\n  //Add to Queue (localStorage)\n  addToQueuBtn.addEventListener('click', () => {\n    queue.includes(currentMovieTitle)\n      ? alert(`${currentMovieTitle} has been added to the queue already`)\n      : queue.push(currentMovieTitle);\n    localStorage.setItem('movie-queue', JSON.stringify(queue));\n  });\n\n  //Add to Watched (localStorage)\n  addToWatchedBtn.addEventListener('click', () => {\n    watched.includes(currentMovieID) ?\n      alert(`${currentMovieTitle} has been watched already`) :\n      watched.push(currentMovieID);\n    localStorage.setItem('movie-watched', JSON.stringify(watched));\n  })\n\n  //Add to Queue (localStorage)\n  addToQueuBtn.addEventListener('click', () => {\n    queue.includes(currentMovieID) ?\n      alert(`${currentMovieTitle} has been added to the queue already`) :\n      queue.push(currentMovieID);\n    localStorage.setItem('movie-queue', JSON.stringify(queue));\n  })\n\n\n\n  //Pressing escape to close modal\n  document.body.addEventListener('keydown', event => {\n    if (event.code === 'Escape') {\n      closeModal();\n    }\n  });\n});\n"],"names":["document","addEventListener","currentMovieTitle","currentMovieID","queue","watched","BASE_URL","API_KEY","API_URL","IMG_URL","JSON","parse","localStorage","getItem","setItem","stringify","modal","getElementById","modalPoster","modalTitle","modalVote","modalPopularity","modalOrigTitle","modalGenre","modalOverview","addToWatchedBtn","addToQueuBtn","closeModal","style","display","getElementsByClassName","window","event","target","main","form","search","loader","querySelector","getMovies","url","lastUrl","classList","toggle","fetch","then","res","json","data","console","log","results","length","innerHTML","forEach","movie","title","poster_path","release_date","genre_ids","movieEl","createElement","add","concat","toUpperCase","slice","src","textContent","vote_average","toFixed","vote_count","popularity","original_title","genre","overview","id","openModal","appendChild","showMovies","currentPage","page","nextPage","prevPage","totalPages","total_pages","current","innerText","prev","next","remove","pageCall","urlSplit","split","queryParams","key","toString","a","join","b","e","preventDefault","searchTerm","value","searchURL","currentMovie","parentElement","lastElementChild","firstElementChild","includes","alert","push","body","code"],"version":3,"file":"index.fbb52325.js.map"}