!function(){var t,e,n,a,o="api_key=b5e824a3d922f68ba211fcf6dbdcb6f5",i="https://api.themoviedb.org/3/discover/movie?sort_by-popularity.desc&"+o;n=null===JSON.parse(localStorage.getItem("movie-queue"))?[]:JSON.parse(localStorage.getItem("movie-queue")),localStorage.setItem("movie-queue",JSON.stringify(n)),a=null===JSON.parse(localStorage.getItem("movie-watched"))?[]:JSON.parse(localStorage.getItem("movie-watched")),localStorage.setItem("movie-watched",JSON.stringify(a));var c,s=document.getElementById("myModal"),r=document.getElementById("modal-poster"),d=document.getElementById("modal-title"),l=document.getElementById("modal-vote"),u=document.getElementById("modal-popularity"),g=document.getElementById("modal-original-title"),m=document.getElementById("modal-genre"),p=document.getElementById("modal-overview"),v=document.getElementById("addToWatchedBtn"),f=document.getElementById("addToQueuBtn"),h=document.getElementsByClassName("close")[0];function b(){s.style.display="none"}fetch("https://api.themoviedb.org/3/genre/movie/list?api_key=b5e824a3d922f68ba211fcf6dbdcb6f5").then((function(t){return t.json()})).then((function(t){c=t.genres,C(t)})).catch((function(t){})),fetch(i).then((function(t){return t.json()})).then((function(t){C(t.results)})).catch((function(t){console.error("Error fetching movies:",t)})),h.addEventListener("click",b),window.addEventListener("click",(function(t){t.target===s&&b()}));var y,E=document.getElementById("main"),L=document.getElementById("search-form"),I=document.getElementById("search-input"),S=document.querySelector(".loader-container"),x=document.getElementById("prev"),B=document.getElementById("next");function k(t){y=t,E.classList.toggle("is-hidden"),S.classList.toggle("is-hidden"),fetch(t).then((function(t){return t.json()})).then((function(t){console.log(t.results),0!==t.results.length?(C(t.results),currentPage=t.page,nextPage=currentPage+1,prevPage=currentPage-1,totalPages=t.total_pages,E.classList.toggle("is-hidden"),S.classList.toggle("is-hidden"),document.addEventListener("DOMContentLoaded",(function(){document.getElementById("current").innerText=currentPage})),x&&x.classList.toggle("disabled",currentPage<=1),B&&B.classList.toggle("disabled",currentPage>=totalPages)):(E.classList.toggle("is-hidden"),S.classList.toggle("is-hidden"),E.innerHTML='<h1 class="no-results">No Results Found</h1>')}))}function C(t){E.innerHTML="",t.forEach((function(t){var e=t.title,n=t.poster_path,a=t.release_date,o=t.genre_ids,i=document.createElement("div");i.classList.add("movie");var v=o&&Array.isArray(c)?o.map((function(t){var e=c.find((function(e){return e.id===t}));return e?e.name:""})).join(", "):"";i.innerHTML='\n            <img src="'.concat(n?"https://image.tmdb.org/t/p/w500"+n:"http:/>/via.placeholder.com/1080x1500",'"\n                alt="').concat(e,'"/>\n            \n            <div class="movie-info">\n                <h3>').concat(e.toUpperCase(),'</h3>\n                <div class="movie-details">\n                <div>').concat(v," | ").concat(a.slice(0,4),"</div>\n                </div>\n            </div>        \n                  "),i.addEventListener("click",(function(){!function(t){r.src="https://image.tmdb.org/t/p/w500/".concat(t.poster_path),d.textContent=t.title.toUpperCase(),l.textContent=t.vote_average.toFixed(1)+"   /   "+t.vote_count,u.textContent=t.popularity.toFixed(1),g.textContent=t.original_title.toUpperCase();var e=t.genre_ids.map((function(t){var e=c.find((function(e){return e.id===t}));return e?e.name:""})).join(", ");m.textContent=e,p.textContent=t.overview,s.style.display="block"}(t)})),E.appendChild(i)}))}function P(t){var e=y.split("?"),n=e[1].split("&"),a=n[n.length-1].split("=");if("page"!=a[0]){k(y+"&page="+t)}else{a[1]=t.toString();var o=a.join("=");n[n.length-1]=o;var i=n.join("&");k(e[0]+"?"+i)}}x&&x.addEventListener("click",(function(){prevPage>0&&P(prevPage)})),B&&B.addEventListener("click",(function(){nextPage<=totalPages&&P(nextPage)})),k(i),k(i),L.addEventListener("submit",(function(t){t.preventDefault();var e=I.value;k(e?"https://api.themoviedb.org/3/search/movie?api_key=b5e824a3d922f68ba211fcf6dbdcb6f5&query="+e:i)})),E.addEventListener("click",(function(e){var n=e.target.parentElement;t=n.lastElementChild.firstElementChild.innerText,console.log(t)})),v.addEventListener("click",(function(){a.includes(t)?alert("".concat(t," has been watched already")):a.push(t),localStorage.setItem("movie-watched",JSON.stringify(a))})),f.addEventListener("click",(function(){n.includes(t)?alert("".concat(t," has been added to the queue already")):n.push(t),localStorage.setItem("movie-queue",JSON.stringify(n))})),v.addEventListener("click",(function(){a.includes(e)?alert("".concat(t," has been watched already")):a.push(e),localStorage.setItem("movie-watched",JSON.stringify(a))})),f.addEventListener("click",(function(){n.includes(e)?alert("".concat(t," has been added to the queue already")):n.push(e),localStorage.setItem("movie-queue",JSON.stringify(n))})),document.body.addEventListener("keydown",(function(t){"Escape"===t.code&&b()}));var w=20,N=document.querySelector(".pagination");function _(t){var e="",n=1;t<=3?n=1:t>=19?n=16:(n=t-2)%2==0&&(n-=1),n>1&&(e+='<button class="pagination-button previous-page" type="submit" id="prev">&#11164</button>',e+='<button class="pagination-button" type="submit">1</button>',n>2&&(e+='<button class="pagination-button" type="submit">...</button>'));for(var a=n;a<=w&&a<n+5;a++)e+=a===t?'<button class="pagination-button current-page" type="submit">'.concat(a,"</button>"):'<button class="pagination-button" type="submit">'.concat(a,"</button>");n+5<=w&&(n+5<w&&(e+='<button class="pagination-button" type="submit">...</button>'),e+='<button class="pagination-button" type="submit">'.concat(w,"</button>")),t<w&&(e+='<button class="pagination-button next-page" type="submit" id="next">&#11166</button>'),N.innerHTML=e}var O=1;_(O),N.addEventListener("click",(function(t){var e=t.target;if(e.classList.contains("pagination-button")&&!e.id){var n=parseInt(e.textContent);isNaN(n)||(_(O=n),P(O))}else e.classList.contains("previous-page")?O>1&&(_(--O),P(O)):e.classList.contains("next-page")&&O<w&&(_(++O),P(O))}))}();
//# sourceMappingURL=library.004a5d6d.js.map
