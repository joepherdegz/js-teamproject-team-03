!function(){var t,e,n,o,a="api_key=b5e824a3d922f68ba211fcf6dbdcb6f5",i="https://api.themoviedb.org/3/discover/movie?sort_by-popularity.desc&"+a;n=null===JSON.parse(localStorage.getItem("movie-queue"))?[]:JSON.parse(localStorage.getItem("movie-queue")),localStorage.setItem("movie-queue",JSON.stringify(n)),o=null===JSON.parse(localStorage.getItem("movie-watched"))?[]:JSON.parse(localStorage.getItem("movie-watched")),localStorage.setItem("movie-watched",JSON.stringify(o));var s,c=document.getElementById("myModal"),d=document.getElementById("modal-poster"),l=document.getElementById("modal-title"),r=document.getElementById("modal-vote"),u=document.getElementById("modal-popularity"),m=document.getElementById("modal-original-title"),g=document.getElementById("modal-genre"),p=document.getElementById("modal-overview"),v=document.getElementById("addToWatchedBtn"),f=document.getElementById("addToQueuBtn"),b=document.getElementsByClassName("close")[0];function h(){c.style.display="none"}fetch("https://api.themoviedb.org/3/genre/movie/list?api_key=b5e824a3d922f68ba211fcf6dbdcb6f5").then((function(t){return t.json()})).then((function(t){s=t.genres,q(t)})).catch((function(t){})),fetch(i).then((function(t){return t.json()})).then((function(t){q(t.results)})).catch((function(t){console.error("Error fetching movies:",t)})),b.addEventListener("click",h),window.addEventListener("click",(function(t){t.target===c&&h()}));var y,E,L,I,S=document.getElementById("main"),B=document.getElementById("search-form"),k=document.getElementById("search-input"),x=document.querySelector(".loader-container"),w=1,C=document.getElementById("prev"),N=document.getElementById("next");function _(t){y=t,S.classList.toggle("is-hidden"),x.classList.toggle("is-hidden"),fetch(t).then((function(t){return t.json()})).then((function(t){console.log(t.results),0!==t.results.length?(q(t.results),w=t.page,E=w+1,L=w-1,I=t.total_pages,S.classList.toggle("is-hidden"),x.classList.toggle("is-hidden"),function(){w<=1?(C&&C.classList.add("disabled"),N&&N.classList.remove("disabled")):w>=I?(C&&C.classList.remove("disabled"),N&&N.classList.add("disabled")):(C&&C.classList.remove("disabled"),N&&N.classList.remove("disabled"));C.addEventListener("click",(function(){L>0&&J(L)})),N.addEventListener("click",(function(){E<=I&&J(E)}))}()):(S.classList.toggle("is-hidden"),x.classList.toggle("is-hidden"),S.innerHTML='<h1 class="no-results">No Results Found</h1>')}))}function q(t){S.innerHTML="",t.forEach((function(t){var e=t.title,n=t.poster_path,o=t.release_date,a=t.genre_ids,i=document.createElement("div");i.classList.add("movie");var v=a&&Array.isArray(s)?a.map((function(t){var e=s.find((function(e){return e.id===t}));return e?e.name:""})).join(", "):"";i.innerHTML='\n            <img src="'.concat(n?"https://image.tmdb.org/t/p/w500"+n:"http:/>/via.placeholder.com/1080x1500",'"\n                alt="').concat(e,'"/>\n            \n            <div class="movie-info">\n                <h3>').concat(e.toUpperCase(),'</h3>\n                <div class="movie-details">\n                <div>').concat(v," | ").concat(o.slice(0,4),"</div>\n                </div>\n            </div>        \n                  "),i.addEventListener("click",(function(){!function(t){d.src="https://image.tmdb.org/t/p/w500/".concat(t.poster_path),l.textContent=t.title.toUpperCase(),r.textContent=t.vote_average.toFixed(1)+"   /   "+t.vote_count,u.textContent=t.popularity.toFixed(1),m.textContent=t.original_title.toUpperCase();var e=t.genre_ids.map((function(t){var e=s.find((function(e){return e.id===t}));return e?e.name:""})).join(", ");g.textContent=e,p.textContent=t.overview,c.style.display="block"}(t)})),S.appendChild(i)}))}function J(t){var e=y.split("?"),n=e[1].split("&"),o=n[n.length-1].split("=");if("page"!=o[0]){_(y+"&page="+t)}else{o[1]=t.toString();var a=o.join("=");n[n.length-1]=a;var i=n.join("&");_(e[0]+"?"+i)}}_(i),_(i),B.addEventListener("submit",(function(t){t.preventDefault();var e=k.value;_(e?"https://api.themoviedb.org/3/search/movie?api_key=b5e824a3d922f68ba211fcf6dbdcb6f5&query="+e:i)})),S.addEventListener("click",(function(e){var n=e.target.parentElement;t=n.lastElementChild.firstElementChild.innerText,console.log(t)})),v.addEventListener("click",(function(){o.includes(t)?alert("".concat(t," has been watched already")):o.push(t),localStorage.setItem("movie-watched",JSON.stringify(o))})),f.addEventListener("click",(function(){n.includes(t)?alert("".concat(t," has been added to the queue already")):n.push(t),localStorage.setItem("movie-queue",JSON.stringify(n))})),v.addEventListener("click",(function(){o.includes(e)?alert("".concat(t," has been watched already")):o.push(e),localStorage.setItem("movie-watched",JSON.stringify(o))})),f.addEventListener("click",(function(){n.includes(e)?alert("".concat(t," has been added to the queue already")):n.push(e),localStorage.setItem("movie-queue",JSON.stringify(n))})),document.body.addEventListener("keydown",(function(t){"Escape"===t.code&&h()}));var O=20,j=document.querySelector(".pagination");function T(t){var e="",n=1;t<=3?n=1:t>=19?n=16:(n=t-2)%2==0&&(n-=1),n>1&&(e+='<button class="pagination-button previous-page" type="submit" id="prev">&#11164</button>',e+='<button class="pagination-button" type="submit">1</button>',n>2&&(e+='<button class="pagination-button" type="submit">...</button>'));for(var o=n;o<=O&&o<n+5;o++)e+=o===t?'<button class="pagination-button current-page" type="submit">'.concat(o,"</button>"):'<button class="pagination-button" type="submit">'.concat(o,"</button>");n+5<=O&&(n+5<O&&(e+='<button class="pagination-button" type="submit">...</button>'),e+='<button class="pagination-button" type="submit">'.concat(O,"</button>")),t<O&&(e+='<button class="pagination-button next-page" type="submit" id="next">&#11166</button>'),j.innerHTML=e}var M=1;T(M),j.addEventListener("click",(function(t){var e=t.target;if(e.classList.contains("pagination-button")&&!e.id){var n=parseInt(e.textContent);isNaN(n)||(T(M=n),J(M))}else e.classList.contains("previous-page")?M>1&&(T(--M),J(M)):e.classList.contains("next-page")&&M<O&&(T(++M),J(M))}))}();
//# sourceMappingURL=library.b9c36c57.js.map
