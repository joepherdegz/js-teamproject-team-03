const e="https://api.themoviedb.org/3/discover/movie?sort_by-popularity.desc&api_key=b5e824a3d922f68ba211fcf6dbdcb6f5";let t,n,a;n=null===JSON.parse(localStorage.getItem("movie-queue"))?[]:JSON.parse(localStorage.getItem("movie-queue")),localStorage.setItem("movie-queue",JSON.stringify(n)),a=null===JSON.parse(localStorage.getItem("movie-watched"))?[]:JSON.parse(localStorage.getItem("movie-watched")),localStorage.setItem("movie-watched",JSON.stringify(a));const s=document.getElementById("myModal"),o=document.getElementById("modal-poster"),i=document.getElementById("modal-title"),d=document.getElementById("modal-vote"),l=document.getElementById("modal-popularity"),c=document.getElementById("modal-original-title"),r=document.getElementById("modal-genre"),u=document.getElementById("modal-overview"),g=document.getElementById("addToWatchedBtn"),m=document.getElementById("addToQueuBtn"),p=document.getElementsByClassName("close")[0];let v;function b(){s.style.display="none"}fetch("https://api.themoviedb.org/3/genre/movie/list?api_key=b5e824a3d922f68ba211fcf6dbdcb6f5").then((e=>e.json())).then((e=>{v=e.genres,x(e)})).catch((e=>{})),fetch(e).then((e=>e.json())).then((e=>{x(e.results)})).catch((e=>{console.error("Error fetching movies:",e)})),p.addEventListener("click",b),window.addEventListener("click",(function(e){e.target===s&&b()}));const h=document.getElementById("main"),y=document.getElementById("search-form"),f=document.getElementById("search-input"),E=document.querySelector(".loader-container");let L,I,P;function S(e){L=e,h.classList.toggle("is-hidden"),E.classList.toggle("is-hidden"),fetch(e).then((e=>e.json())).then((e=>{console.log(e.results),0!==e.results.length?(x(e.results),currentPage=e.page,nextPage=currentPage+1,prevPage=currentPage-1,totalPages=e.total_pages,h.classList.toggle("is-hidden"),E.classList.toggle("is-hidden"),document.addEventListener("DOMContentLoaded",(function(){document.getElementById("current").innerText=currentPage})),currentPage<=1?(I&&I.classList.add("disabled"),P&&P.classList.remove("disabled")):currentPage>=totalPages?(I&&I.classList.remove("disabled"),P&&P.classList.add("disabled")):(I&&I.classList.remove("disabled"),P&&P.classList.remove("disabled"))):(h.classList.toggle("is-hidden"),E.classList.toggle("is-hidden"),h.innerHTML='<h1 class="no-results">No Results Found</h1>')})),I=document.getElementById("prev"),P=document.getElementById("next"),I&&I.addEventListener("click",(()=>{prevPage>0&&B(prevPage)})),P&&P.addEventListener("click",(()=>{nextPage<=totalPages&&B(nextPage)}))}function x(e){h.innerHTML="",e.forEach((e=>{const{title:t,poster_path:n,release_date:a,genre_ids:g}=e,m=document.createElement("div");m.classList.add("movie");const p=g&&Array.isArray(v)?g.map((e=>{const t=v.find((t=>t.id===e));return t?t.name:""})).join(", "):"";m.innerHTML=`\n            <img src="${n?"https://image.tmdb.org/t/p/w500"+n:"http:/>/via.placeholder.com/1080x1500"}"\n                alt="${t}"/>\n            \n            <div class="movie-info">\n                <h3>${t.toUpperCase()}</h3>\n                <div class="movie-details">\n                <div>${p} | ${a.slice(0,4)}</div>\n                </div>\n            </div>        \n                  `,m.addEventListener("click",(function(){!function(e){o.src=`https://image.tmdb.org/t/p/w500/${e.poster_path}`,i.textContent=e.title.toUpperCase(),d.textContent=e.vote_average.toFixed(1)+"   /   "+e.vote_count,l.textContent=e.popularity.toFixed(1),c.textContent=e.original_title.toUpperCase();const t=e.genre_ids.map((e=>{const t=v.find((t=>t.id===e));return t?t.name:""})).join(", ");r.textContent=t,u.textContent=e.overview,s.style.display="block"}(e)})),h.appendChild(m)}))}function B(e){let t=L.split("?"),n=t[1].split("&"),a=n[n.length-1].split("=");if("page"!=a[0]){S(L+"&page="+e)}else{a[1]=e.toString();let s=a.join("=");n[n.length-1]=s;let o=n.join("&");S(t[0]+"?"+o)}}S(e),y.addEventListener("submit",(t=>{t.preventDefault();const n=f.value;S(n?"https://api.themoviedb.org/3/search/movie?api_key=b5e824a3d922f68ba211fcf6dbdcb6f5&query="+n:e)})),I.addEventListener("click",(()=>{prevPage>0&&B(prevPage)})),P.addEventListener("click",(()=>{nextPage<=totalPages&&B(nextPage)})),h.addEventListener("click",(e=>{let n=e.target.parentElement;t=n.lastElementChild.firstElementChild.innerText,console.log(t)})),g.addEventListener("click",(()=>{a.includes(t)?alert(`${t} has been watched already`):a.push(t),localStorage.setItem("movie-watched",JSON.stringify(a))})),m.addEventListener("click",(()=>{n.includes(t)?alert(`${t} has been added to the queue already`):n.push(t),localStorage.setItem("movie-queue",JSON.stringify(n))})),g.addEventListener("click",(()=>{a.includes(undefined)?alert(`${t} has been watched already`):a.push(undefined),localStorage.setItem("movie-watched",JSON.stringify(a))})),m.addEventListener("click",(()=>{n.includes(undefined)?alert(`${t} has been added to the queue already`):n.push(undefined),localStorage.setItem("movie-queue",JSON.stringify(n))})),document.body.addEventListener("keydown",(e=>{"Escape"===e.code&&b()}));const k=document.querySelector(".pagination");function C(e){let t="";startPage=e<3?1:e>=18?16:e-2,startPage>1&&(t+='<button class="pagination-button previous-page" type="submit" id="prev">&#11164</button>',t+='<button class="pagination-button" type="submit">1</button>',startPage>2&&(t+='<button class="pagination-button" type="submit">...</button>'));for(let n=startPage;n<=20&&n<startPage+5;n++)t+=n===e?`<button class="pagination-button current-page" type="submit">${n}</button>`:`<button class="pagination-button" type="submit">${n}</button>`;startPage+5<=20&&(startPage+5<20&&(t+='<button class="pagination-button" type="submit">...</button>'),t+='<button class="pagination-button" type="submit">20</button>'),e<20&&(t+='<button class="pagination-button next-page" type="submit" id="next">&#11166</button>'),k.innerHTML=t}let w=1;C(w),k.addEventListener("click",(e=>{const t=e.target;if(t.classList.contains("pagination-button")&&!t.id){const e=parseInt(t.textContent);isNaN(e)||(w=e,C(w),B(w))}else t.classList.contains("previous-page")?w>1&&(w--,C(w),B(w)):t.classList.contains("next-page")&&w<20&&(w++,C(w),B(w))}));
//# sourceMappingURL=library.fec42c6f.js.map
